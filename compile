#!/usr/bin/ruby
require 'optparse'

@file = ""

usage = "Usage: ./compile [-d | --debug] filename.wacc"

options = {}
opts = OptionParser.new do |opts|
  opts.banner = usage

  opts.on("-d", "--debug") do |d|
    options[:debug] = d
  end

  opts.on_tail("-h", "--help") do |v|
    puts opts
    exit
  end
end.parse!

# if !ARGV[0]
#   puts usage
#   exit
# else
#   @file = ARGV[0]
# end

def compile(isDebug)
  puts "Running WACC Compile"
  debug = isDebug ? '-q' : ''
  result = `mvn #{debug} exec:java -Dexec.mainClass="WACCCompile" -Dexec.args=""`
  puts result
  puts "Exited with: #{$?.exitstatus}"
end

compile(options[:debug])
